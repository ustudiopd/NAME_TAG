# 명찰 제작 시스템 개발 플랜

## 🎯 현재 상황 분석

### ✅ 완료된 것들
- Supabase 연동 및 데이터베이스 설정
- 기본 UI 레이아웃 (3단 컬럼)
- 명단 목록 표시
- 명단 추가 폼
- 체크인 상태 관리 UI

### ❌ 아직 구현되지 않은 핵심 기능들
- Fabric.js 캔버스 (명찰 편집의 핵심!)
- 실제 데이터 연동 (현재는 UI만 있음)
- 엑셀 업로드
- 이미지 관리
- 템플릿 저장/불러오기
- 인쇄 기능

---

## 🚀 전체 개발 플랜 (우선순위별)

### **Phase 1: 핵심 캔버스 기능 (1-2주)**
**목표**: PyQt의 QGraphicsScene을 웹으로 구현

#### 1.1 Fabric.js 캔버스 구현 🔥
- 중앙 영역에 실제 캔버스 추가
- 드래그 가능한 텍스트 객체 (회사명, 이름, 직급)
- 객체 선택/이동/크기조절 기능
- 캔버스 초기화 및 기본 설정

#### 1.2 속성 패널 구현 🔥
- 우측 패널에 선택된 객체의 속성 표시
- X, Y 좌표, 폰트 크기, 색상 등 실시간 조절
- 슬라이더와 입력창으로 직관적 조작
- 폰트 패밀리, 스타일 선택

#### 1.3 우클릭 컨텍스트 메뉴
- 폰트 크기 조절
- 볼드체/이탤릭체 토글
- 객체 복사/삭제
- 레이어 순서 조절

---

### **Phase 2: 데이터 연동 및 파일 처리 (1주)**
**목표**: 실제 데이터와 연동하여 완전한 워크플로우 구현

#### 2.1 실제 데이터 연동 🔥
- 명단 선택 시 캔버스에 실제 데이터 반영
- Supabase와 실시간 동기화
- 로딩 상태 및 에러 처리
- 데이터 검증 및 유효성 검사

#### 2.2 엑셀 파일 업로드
- 드래그 앤 드롭으로 엑셀 파일 업로드
- XLSX.js로 클라이언트 사이드 파싱
- 대량 데이터 Supabase에 일괄 삽입
- 진행률 표시 및 에러 처리

#### 2.3 이미지 관리
- 배경 이미지 업로드 (Supabase Storage)
- 이미지 크기 조절 및 위치 조정
- 이미지 미리보기 및 갤러리
- 이미지 최적화 및 압축

---

### **Phase 3: 고급 기능 (1주)**
**목표**: 사용성과 편의성 향상

#### 3.1 템플릿 시스템
- 명찰 디자인 JSON으로 저장
- 템플릿 불러오기/내보내기
- 여러 템플릿 관리
- 템플릿 미리보기

#### 3.2 인쇄 기능
- 브라우저 인쇄 API 활용
- 인쇄용 CSS 최적화
- 미리보기 기능
- 페이지 설정 및 레이아웃

#### 3.3 QR 코드 체크인
- 각 명찰에 QR 코드 생성
- 모바일 체크인 페이지
- 실시간 체크인 상태 업데이트
- 체크인 통계 및 리포트

---

### **Phase 4: 최적화 및 배포 (3-5일)**
**목표**: 프로덕션 준비

#### 4.1 성능 최적화
- 대용량 명단 처리 최적화
- 캔버스 렌더링 최적화
- 로딩 상태 개선
- 메모리 사용량 최적화

#### 4.2 반응형 디자인
- 모바일/태블릿 최적화
- 터치 제스처 지원
- 적응형 레이아웃
- 접근성 개선

#### 4.3 배포 및 테스트
- Vercel 배포
- 브라우저 호환성 테스트
- 사용자 테스트
- 성능 모니터링

---

## 🎯 즉시 시작할 작업

### **Phase 1의 첫 번째 작업**부터 시작하는 것을 추천합니다:

1. **Fabric.js 캔버스 구현** - 가장 핵심적인 기능
2. **실제 데이터 연동** - 현재 UI가 실제로 작동하도록

---

## 📋 상세 작업 목록

### Phase 1: 핵심 캔버스 기능
- [ ] Fabric.js 캔버스 초기화
- [ ] 드래그 가능한 텍스트 객체 생성
- [ ] 객체 선택/이동/크기조절 기능
- [ ] 우측 속성 패널 구현
- [ ] 실시간 속성 연동
- [ ] 우클릭 컨텍스트 메뉴
- [ ] 폰트 및 스타일 조절

### Phase 2: 데이터 연동 및 파일 처리
- [ ] 명단 선택 시 캔버스 데이터 반영
- [ ] Supabase 실시간 동기화
- [ ] 엑셀 파일 업로드 기능
- [ ] 이미지 업로드 및 관리
- [ ] 에러 처리 및 로딩 상태

### Phase 3: 고급 기능
- [ ] 템플릿 저장/불러오기
- [ ] 인쇄 기능 구현
- [ ] QR 코드 생성
- [ ] 체크인 시스템

### Phase 4: 최적화 및 배포
- [ ] 성능 최적화
- [ ] 반응형 디자인
- [ ] Vercel 배포
- [ ] 최종 테스트

---

## 🛠 기술 스택

- **프론트엔드**: Next.js 14, React 18, Tailwind CSS
- **백엔드**: Supabase (PostgreSQL, Auth, Storage)
- **캔버스**: Fabric.js
- **파일 처리**: XLSX.js
- **배포**: Vercel

---

## 📊 데이터베이스 스키마

### profiles 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | uuid | 기본 키 |
| created_at | timestamptz | 생성 시간 |
| company | text | 회사명 |
| name | text | 이름 |
| title | text | 직급 |
| is_checked_in | boolean | 체크인 상태 |
| checked_in_at | timestamptz | 체크인 시간 |

### Storage
- **namecard-images**: 배경 이미지 저장용 공개 버킷

---

## 🔧 개발 가이드

### 프로젝트 구조
```
├── app/                    # Next.js App Router
│   ├── globals.css        # 전역 스타일
│   ├── layout.js          # 루트 레이아웃
│   └── page.js            # 메인 페이지
├── components/            # React 컴포넌트
│   ├── ProfileList.js     # 명단 목록
│   ├── ProfileForm.js     # 명단 추가 폼
│   ├── CanvasEditor.js    # 캔버스 편집기
│   └── PropertyPanel.js   # 속성 패널
├── lib/                   # 유틸리티 함수
│   ├── supabaseClient.js  # Supabase 클라이언트
│   ├── database.js        # 데이터베이스 함수
│   └── storage.js         # 스토리지 함수
└── memory_bank/           # 프로젝트 문서
```

### 주요 함수
- `getAllProfiles()`: 모든 프로필 조회
- `createProfile()`: 프로필 생성
- `updateProfile()`: 프로필 업데이트
- `updateCheckInStatus()`: 체크인 상태 업데이트
- `uploadImage()`: 이미지 업로드
- `createProfilesBulk()`: 대량 프로필 생성

---

## 🚀 배포

### Vercel 배포
1. GitHub 저장소에 코드 푸시
2. Vercel에서 프로젝트 연결
3. 환경 변수 설정
4. 자동 배포 완료

---

## 📝 사용법

1. **명단 추가**: 우상단 "명단 추가" 버튼 클릭
2. **명단 선택**: 좌측 목록에서 명단 클릭하여 편집
3. **체크인 관리**: 각 명단의 체크인 버튼으로 상태 변경
4. **명찰 편집**: 중앙 캔버스에서 드래그 앤 드롭으로 디자인
5. **이미지 추가**: 배경 이미지 업로드 및 적용
6. **설정 저장**: JSON 형태로 템플릿 저장/불러오기

---

## 🔒 보안

- Row Level Security (RLS) 활성화
- 환경 변수를 통한 API 키 관리
- 파일 업로드 크기 제한 (5MB)
- 이미지 타입 검증

---

## 📱 반응형 지원

- 모바일: 세로 레이아웃, 터치 최적화
- 태블릿: 적응형 그리드 레이아웃
- 데스크톱: 3단 컬럼 레이아웃

---

## 🤝 기여하기

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## 라이선스
MIT License

---

### GitHub 저장소
- [https://github.com/ustudiopd/name_tag.git](https://github.com/ustudiopd/name_tag.git)